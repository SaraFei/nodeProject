<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<style>
    td,
    th {
        border: 3px solid;
        width: 200px;

        border-color: black;
    }

    table {
        border-collapse: collapse;
        height: 650px;
        margin-left: auto;
        margin-right: auto;
        text-align: center;
    }

    .style {
        font-weight: bolder;
        font-size: xx-large;
    }

    tr:hover {
        background-color: rgb(255, 255, 20);
    }
</style>

<body>
    <h1 style="text-align: center">http://localhost:4500 :כתובת השרת</h1>
    <p class="style">sweets</p>
    <table>
        <tr>
            <th>מקרי קיצון</th>
            <th>query params</th>
            <th> url מה הכתובת </th>
            <th>bodyמה שולחים ב</th>
            <th>method איזה </th>
            <th>הסבר</th>
            <th>מה מחזיר</th>
            <th>איזה פעולה</th>
        </tr>
        <tr>
            <td>-</td>
            <td>search,page,element</td>
            <td>/api/sweets</td>
            <td>-</td>
            <td>get</td>
            <td> שליפת כל המוצרים, ניתנת אפשרות לקבלת המוצרים לפי חיפוש שם מוצר ומחיר וכן הכנסת ערך page כדי לקפוץ לעמוד
                מסוים וכן משתנה perPage שיאפשר שינוי בכמות המוצרים המוצגים בדף</td>
            <td>products[{_id,price,productName, description,imagePath,createDate}]</td>
            <td>read</td>
        </tr>
        <tr>
            <td>אם לא תקין- יחזיר קוד 400
                <br> id ואם אין כזה
                <br>מחזיר שגיאה 404
            </td>
            <td>id</td>
            <td>/api/sweets/{id}</td>
            <td>-</td>
            <td>get</td>
            <td>שליפת מוצר לפי קוד מוצר</td>
            <td>{_id,sweetName,sweetPrice, sweetMenueFactureDate,sweetAmount,imgSweet}</td>
            <td>read</td>
        </tr>
        <tr>
            <td>אם קיים מוצר עם כזה שם מחזיר קוד 409
                <br>אם חסר שדות חובה, או לא מילאו כפי הנדרש יחזיר 403
            </td>
            <td>-</td>
            <td>/api/sweets</td>
            <td>{_id,sweetName,sweetPrice, sweetMenueFactureDate,sweetAmount,imgSweet}</td>
            <td>post</td>
            <td>מוסיף מוצר חדש למסד הנתונים ומחזיר אותו</td>
            <td>sweetName,sweetPrice, sweetMenueFactureDate,sweetAmount,imgSweet</td>
            <td>create</td>
        </tr>
        <tr>
            <td> לא תקין יחזיר קוד שגיאה 400 id אם ה
                <br> יחזיר 404 id אם לא נמצא כזה
            </td>
            <td>-</td>
            <td>/api/sweets/{id}</td>
            <td>-</td>
            <td>delete</td>
            <td> ומוחק מוצר עם קוד זה ממסד הנתונים ומחזיר אותו id מקבל</td>
            <td>{_id,sweetName,sweetPrice, sweetMenueFactureDate,sweetAmount,imgSweet}</td>
            <td>delete</td>
        </tr>
        <tr>
            <td>אם הקוד לא תקין מחזיר 400 ואם אין מוצר עם כזה קוד מחזיר 404
                <br>אם הבדיקת וולידציה של הכנסת הערכים לא תקינה מחזיר את קוד השגיאה 403
            </td>
            <td>-</td>
            <td>/api/sweets/{id}</td>
            <td>אוביקט עם השדות שרוצים לעדכן</td>
            <td>put</td>
            <td> מעדכן את המוצר ומחזיר אותו id מקבל</td>
            <td>{_id,sweetName,sweetPrice, sweetMenueFactureDate,sweetAmount,imgSweet}</td>
            <td>update</td>
        </tr>
    </table>

    <p class="style">users</p>
    <table>
        <tr>
            <th>מקרי קיצון</th>
            <th>query params</th>
            <th> url מה הכתובת </th>
            <th>bodyמה שולחים ב</th>
            <th>method איזה </th>
            <th>הסבר</th>
            <th>מה מחזיר</th>
            <th>איזה פעולה</th>
        </tr>
        <tr>
            <td></td>
            <td>-</td>
            <td>/api/users</td>
            <td>-</td>
            <td>get</td>
            <td>מחזירה את כל המשתמשים ,role=admin פעולה זו מורשה עבור מנהל בלבד </td>
            <td>users[{_id,userName,emil,userPwd, role,date}]</td>
            <td>read</td>
        </tr>
        <tr>
            <td>אם קיים משתמש עם אותו שם ואותו מייל מחזיר קוד 409
                <br>אם הבדיקת וולידציה של הכנסת הערכים לא תקינה מחזיר את קוד השגיאה 403

            </td>
            <td>-</td>
            <td>/api/users</td>
            <td>{userName,emil,userPwd, role,date} </td>
            <td>post</td>
            <td>מוסיף משתמש חדש למסד הנתונים ומחזיר אותו ובנוסף מחזיר
                <br> token
            </td>
            <td>{_id,userEmail,userName,role ,websiteRegistrationDate,token}</td>
            <td>create</td>
        </tr>
        <tr>
            <td>בודק האם קיים משתמש במסד הנתונים שהשם והסיסמא שנשלחו מתאימים לו</td>
            <td>-</td>
            <td>/api/users/login</td>
            <td>{userPassword,userEmail}</td>
            <td>post</td>
            <td>כניסת משתמש רשום וקבלת
                <br> בחזרה token
            </td>
            <td>{token}</td>
            <td>create</td>
        </tr>


    </table>
    <p class="style">orders</p>
    <table>
        <tr>
            <th> מקרי קיצון</th>
            <th>query params</th>
            <th> url מה הכתובת </th>
            <th>bodyמה שולחים ב</th>
            <th>method איזה </th>
            <th>הסבר</th>
            <th>מה מחזיר</th>
            <th>איזה פעולה</th>
        </tr>
        <tr>
            <td>-</td>
            <td>-</td>
            <td>/api/orders</td>
            <td>-</td>
            <td>get</td>
            <td>מחזירה את כל ההזמנות ,role=admin פעולה זו מורשה עבור מנהל בלבד
       
      <td> orders[{_id,orderDate,deliveryDate,customerAddress ,customerCode,
        productsDetails:{_id,productName,amount},orderShipped}]</td>
        <td>read</td>
       </tr>
        <tr>
            <td>אם הקוד שנשלח אינו תקין, מחזיר קוד 400, אם לא קיימת הזמנה עם כזה קוד - מחזיר 404</td>
            <td>-</td>
            <td>/api/orders/{id}</td>
            <td>-</td>
            <td>delete</td>
            <td> id מחיקת נזמנה לפי
                <br> מורשה רק למנהל או למשתמש שביצעה אותה
            </td>
            <td>{_id,orderDate,deliveryDate,customerAddress ,customerCode,
                productsDetails:{_id,productName,amount},orderShipped}</td>
            <td>delete</td>
            
        </tr>
        <tr> 
            <td>-</td>
            <td>-</td>
            <td>/api/orders</td>
            <td>
                orderedProducts:{orderDate,deliveryDate,customerAddress ,customerCode,
                productsDetails:{_id,productName,amount},orderShipped}</td>
            <td>post</td>
            <td>הוספת הזמנה, מורשה רק למשתמש רשום </td>
            <td>
                {_id,orderDate,deliveryDate,customerAddress ,customerCode,
                productsDetails:{_id,productName,amount},orderShipped}</td>
            <td>create</td>
        </tr>
        <tr>
            <td>-</td>
            <td>-</td>
            <td>/api/orders/getOrderById</td>
            <td> את הקוד הזמנה body אופציונלי למנהל לשלוח ב
                <br>ברירת המחדל היא שלפי הטוקן הוא מקבל את ההזמנות שלא, ללא שליחת פרמטרים
            </td>
            <td>get</td>
            <td></td>
            <td>orders[{_id,orderDate,dedLine,orderAddress ,invaitingCode,
                orderedProducts:{_id,productName,price, imagePath,account},orderInTheWay}]</td>
            <td>read</td>
        </tr>
        <tr>

            <td>אם הקוד לא תקין- מחזיר קוד 400, ואם לא קיימת הזמנה עם כזה קוד- מחזיר קוד 404</td>
            <td>-</td>
            <td>/api/orders/{id}</td>
            <td>-</td>
            <td>put</td>
            <td>אפשרי רק למנהל
                <br>מעדכן את השדה
                <br>orderShipped =true
            </td>
            <td>{_id,orderDate,deliveryDate,customerAddress ,customerCode,
                productsDetails:{_id,productName,amount},orderShipped}</td>
            <td>update</td>
        </tr>


    </table>


</body>

</html>